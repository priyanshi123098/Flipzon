{"ast":null,"code":"var _jsxFileName = \"/home/priyanshi/Desktop/sem4/DASS/project1/client/src/components/Support/Chat.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport styles from './styles.module.css';\nconst Chat = () => {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  useEffect(() => {\n    // Start a new session when the component mounts\n    setMessages([{\n      sender: 'bot',\n      text: 'Hello! How can I assist you today?'\n    }]);\n  }, []);\n  const handleInputChange = e => {\n    setInput(e.target.value);\n  };\n\n  // const handleSend = async () => {\n  //     if (input.trim() === '') return;\n\n  //     const newMessage = { sender: 'user', text: input };\n  //     setMessages([...messages, newMessage]);\n  //     setInput('');\n\n  //     try {\n  //         const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n  //             message: input,\n  //             conversation: messages,\n  //         });\n  //         const botMessage = { sender: 'bot', text: response.data.reply };\n  //         setMessages((prevMessages) => [...prevMessages, botMessage]);\n  //     } catch (error) {\n  //         console.error('Error sending message:', error);\n  //     }\n  // };\n  // const handleSend = async () => {\n\n  //     if (input.trim() === '') return;\n  //     const newMessage = { sender: 'user', text: input };\n  //     setMessages([...messages, newMessage]);\n  //     setInput('');\n  //     console.log('Messages before API call:', messages);\n  //     try {\n  //         const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n  //             message: input,\n  //             conversation: messages,\n  //         });\n  //         console.log('API response:', response.data);\n  //         const botMessage = { sender: 'bot', text: response.data.reply };\n  //         setMessages((prevMessages) => [...prevMessages, botMessage]);\n\n  //     } catch (error) {\n\n  //         console.error('Error sending message:', error);\n\n  //     }\n\n  // };\n  const handleSend = async () => {\n    if (input.trim() === '') return;\n    const newMessage = {\n      sender: 'user',\n      text: input\n    };\n    setMessages(prevMessages => [...prevMessages, newMessage]); // Update state with the new user message\n    setInput('');\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n        message: input,\n        conversation: [...messages, newMessage] // Include the new message in the conversation\n      });\n      const botMessage = {\n        sender: 'bot',\n        text: response.data.reply\n      };\n      setMessages(prevMessages => [...prevMessages, botMessage]); // Update state with the bot's response\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chat_container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chat_window,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, messages.map((msg, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: msg.sender === 'bot' ? styles.bot_message : styles.user_message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, msg.text))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.input_container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: input,\n    onChange: handleInputChange,\n    placeholder: \"Type your message...\",\n    className: styles.input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSend,\n    className: styles.send_button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"Send\")));\n};\n\n// export default Chat;\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import styles from './styles.module.css';\n\n// const Chat = () => {\n//   const [messages, setMessages] = useState([]);\n//   const [input, setInput] = useState('');\n//   const [error, setError] = useState(null);\n\n//   useEffect(() => {\n//     setMessages([{ sender: 'bot', text: 'Hello! How can I assist you today?' }]);\n//   }, []);\n\n//   const handleInputChange = (e) => {\n//     setInput(e.target.value);\n//   };\n\n//   const handleSend = async () => {\n//     if (input.trim() === '') return;\n\n//     const newMessage = { sender: 'user', text: input };\n//     setMessages(prevMessages => [...prevMessages, newMessage]);\n//     setInput('');\n\n//     try {\n//       const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n//         message: input,\n//         conversation: messages,\n//       });\n\n//       // Debug log to check response structure\n//       console.log('API Response:', response.data);\n\n//       // Add error checking for response structure\n//       if (!response.data || !response.data.reply) {\n//         throw new Error('Invalid response format from API');\n//       }\n\n//       const botMessage = { sender: 'bot', text: response.data.reply };\n//       setMessages(prevMessages => [...prevMessages, response.data.reply]);\n\n//     } catch (error) {\n//       console.error('Error sending message:', error);\n//       setError('Failed to send message. Please try again.');\n//       // Optionally show error in UI\n//       setMessages(prevMessages => [...prevMessages, {\n//         sender: 'bot',\n//         text: 'Sorry, I encountered an error. Please try again.'\n//       }]);\n//     }\n//   };\n\n//   return (\n//     <div className=\"w-full max-w-2xl mx-auto p-4\">\n//       <div className=\"bg-gray-100 rounded-lg p-4 h-96 overflow-y-auto mb-4\">\n//         {messages.map((msg, index) => (\n//           <div\n//             key={index}\n//             className={`mb-2 p-2 rounded-lg ${\n//               msg.sender === 'bot' \n//                 ? 'bg-blue-100 mr-auto' \n//                 : 'bg-green-100 ml-auto'\n//             } max-w-[80%]`}\n//           >\n//             {msg.text}\n//           </div>\n//         ))}\n//         {error && (\n//           <div className=\"text-red-500 text-sm mt-2\">{error}</div>\n//         )}\n//       </div>\n//       <div className=\"flex gap-2\">\n//         <input\n//           type=\"text\"\n//           value={input}\n//           onChange={handleInputChange}\n//           onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n//           placeholder=\"Type your message...\"\n//           className=\"flex-1 p-2 border rounded\"\n//         />\n//         <button\n//           onClick={handleSend}\n//           className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n//         >\n//           Send\n//         </button>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Chat;","map":{"version":3,"names":["React","useState","useEffect","axios","styles","Chat","messages","setMessages","input","setInput","sender","text","handleInputChange","e","target","value","handleSend","trim","newMessage","prevMessages","response","post","process","env","REACT_APP_API_URL","message","conversation","botMessage","data","reply","error","console","createElement","className","chat_container","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","chat_window","map","msg","index","key","bot_message","user_message","input_container","type","onChange","placeholder","onClick","send_button"],"sources":["/home/priyanshi/Desktop/sem4/DASS/project1/client/src/components/Support/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport styles from './styles.module.css';\n\nconst Chat = () => {\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState('');\n\n    useEffect(() => {\n        // Start a new session when the component mounts\n        setMessages([{ sender: 'bot', text: 'Hello! How can I assist you today?' }]);\n    }, []);\n\n    const handleInputChange = (e) => {\n        setInput(e.target.value);\n    };\n\n    // const handleSend = async () => {\n    //     if (input.trim() === '') return;\n\n    //     const newMessage = { sender: 'user', text: input };\n    //     setMessages([...messages, newMessage]);\n    //     setInput('');\n\n    //     try {\n    //         const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n    //             message: input,\n    //             conversation: messages,\n    //         });\n    //         const botMessage = { sender: 'bot', text: response.data.reply };\n    //         setMessages((prevMessages) => [...prevMessages, botMessage]);\n    //     } catch (error) {\n    //         console.error('Error sending message:', error);\n    //     }\n    // };\n    // const handleSend = async () => {\n\n    //     if (input.trim() === '') return;\n    //     const newMessage = { sender: 'user', text: input };\n    //     setMessages([...messages, newMessage]);\n    //     setInput('');\n    //     console.log('Messages before API call:', messages);\n    //     try {\n    //         const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n    //             message: input,\n    //             conversation: messages,\n    //         });\n    //         console.log('API response:', response.data);\n    //         const botMessage = { sender: 'bot', text: response.data.reply };\n    //         setMessages((prevMessages) => [...prevMessages, botMessage]);\n\n    //     } catch (error) {\n\n    //         console.error('Error sending message:', error);\n\n    //     }\n\n    // };\n    const handleSend = async () => {\n        if (input.trim() === '') return;\n    \n        const newMessage = { sender: 'user', text: input };\n        setMessages((prevMessages) => [...prevMessages, newMessage]); // Update state with the new user message\n        setInput('');\n    \n        try {\n            const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n                message: input,\n                conversation: [...messages, newMessage], // Include the new message in the conversation\n            });\n    \n            const botMessage = { sender: 'bot', text: response.data.reply };\n            setMessages((prevMessages) => [...prevMessages, botMessage]); // Update state with the bot's response\n    \n        } catch (error) {\n            console.error('Error sending message:', error);\n        }\n    };\n\n    return (\n        <div className={styles.chat_container}>\n            <div className={styles.chat_window}>\n                {messages.map((msg, index) => (\n                    <div key={index} className={msg.sender === 'bot' ? styles.bot_message : styles.user_message}>\n                        {msg.text}\n                    </div>\n                ))}\n            </div>\n            <div className={styles.input_container}>\n                <input\n                    type=\"text\"\n                    value={input}\n                    onChange={handleInputChange}\n                    placeholder=\"Type your message...\"\n                    className={styles.input}\n                />\n                <button onClick={handleSend} className={styles.send_button}>\n                    Send\n                </button>\n            </div>\n        </div>\n    );\n};\n\n// export default Chat;\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import styles from './styles.module.css';\n\n\n// const Chat = () => {\n//   const [messages, setMessages] = useState([]);\n//   const [input, setInput] = useState('');\n//   const [error, setError] = useState(null);\n\n//   useEffect(() => {\n//     setMessages([{ sender: 'bot', text: 'Hello! How can I assist you today?' }]);\n//   }, []);\n\n//   const handleInputChange = (e) => {\n//     setInput(e.target.value);\n//   };\n\n//   const handleSend = async () => {\n//     if (input.trim() === '') return;\n    \n//     const newMessage = { sender: 'user', text: input };\n//     setMessages(prevMessages => [...prevMessages, newMessage]);\n//     setInput('');\n\n//     try {\n//       const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n//         message: input,\n//         conversation: messages,\n//       });\n      \n//       // Debug log to check response structure\n//       console.log('API Response:', response.data);\n      \n//       // Add error checking for response structure\n//       if (!response.data || !response.data.reply) {\n//         throw new Error('Invalid response format from API');\n//       }\n\n//       const botMessage = { sender: 'bot', text: response.data.reply };\n//       setMessages(prevMessages => [...prevMessages, response.data.reply]);\n\n//     } catch (error) {\n//       console.error('Error sending message:', error);\n//       setError('Failed to send message. Please try again.');\n//       // Optionally show error in UI\n//       setMessages(prevMessages => [...prevMessages, {\n//         sender: 'bot',\n//         text: 'Sorry, I encountered an error. Please try again.'\n//       }]);\n//     }\n//   };\n\n//   return (\n//     <div className=\"w-full max-w-2xl mx-auto p-4\">\n//       <div className=\"bg-gray-100 rounded-lg p-4 h-96 overflow-y-auto mb-4\">\n//         {messages.map((msg, index) => (\n//           <div\n//             key={index}\n//             className={`mb-2 p-2 rounded-lg ${\n//               msg.sender === 'bot' \n//                 ? 'bg-blue-100 mr-auto' \n//                 : 'bg-green-100 ml-auto'\n//             } max-w-[80%]`}\n//           >\n//             {msg.text}\n//           </div>\n//         ))}\n//         {error && (\n//           <div className=\"text-red-500 text-sm mt-2\">{error}</div>\n//         )}\n//       </div>\n//       <div className=\"flex gap-2\">\n//         <input\n//           type=\"text\"\n//           value={input}\n//           onChange={handleInputChange}\n//           onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n//           placeholder=\"Type your message...\"\n//           className=\"flex-1 p-2 border rounded\"\n//         />\n//         <button\n//           onClick={handleSend}\n//           className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n//         >\n//           Send\n//         </button>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}